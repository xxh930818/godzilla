{"ast":null,"code":"var _jsxFileName = \"/Users/xiaoxiaohui/Work/godzilla/src/components/Menu/subMenu.tsx\";\nimport React, { useContext, useState } from 'react';\nimport classNames from 'classnames';\nimport { MenuContext } from './menu';\nimport Icon from '../Icon/icon';\nimport Transition from '../Transition/transition';\n\nconst SubMenu = ({\n  index,\n  title,\n  children,\n  className\n}) => {\n  const context = useContext(MenuContext);\n  const openedSubMenus = context.defaultOpenSubMenus;\n  const isOpend = index && context.mode === 'vertical' ? openedSubMenus.includes(index) : false;\n  const [menuOpen, setOpen] = useState(isOpend);\n  const classes = classNames('menu-item submenu-item', className, {\n    'is-active': context.index === index,\n    'is-opened': menuOpen,\n    'is-vertical': context.mode === 'vertical'\n  });\n\n  const handleClick = e => {\n    e.preventDefault();\n    setOpen(!menuOpen);\n  };\n\n  let timer;\n\n  const handleMouse = (e, toggle) => {\n    clearTimeout(timer);\n    e.preventDefault();\n    timer = setTimeout(() => {\n      setOpen(toggle);\n    }, 300);\n  };\n\n  const clickEvents = context.mode === 'vertical' ? {\n    onClick: handleClick\n  } : {};\n  const hoverEvents = context.mode !== 'vertical' ? {\n    onMouseEnter: e => {\n      handleMouse(e, true);\n    },\n    onMouseLeave: e => {\n      handleMouse(e, false);\n    }\n  } : {};\n\n  const renderChildren = () => {\n    const subMenuClasses = classNames('viking-submenu', {\n      'menu-opened': menuOpen\n    });\n    const childrenComponent = React.Children.map(children, (child, i) => {\n      const childElement = child;\n\n      if (childElement.type.displayName === 'MenuItem') {\n        return React.cloneElement(childElement, {\n          index: `${index}-${i}`\n        });\n      } else {\n        console.error(\"Warning: SubMenu has a child which is not a MenuItem component\");\n      }\n    });\n    return /*#__PURE__*/React.createElement(Transition, {\n      in: menuOpen,\n      timeout: 300,\n      animation: \"zoom-in-top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: subMenuClasses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, childrenComponent));\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", Object.assign({\n    key: index,\n    className: classes\n  }, hoverEvents, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: \"submenu-title\"\n  }, clickEvents, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), title, /*#__PURE__*/React.createElement(Icon, {\n    icon: \"angle-down\",\n    className: \"arrow-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  })), renderChildren());\n};\n\nSubMenu.displayName = 'SubMenu';\nexport default SubMenu;","map":{"version":3,"sources":["/Users/xiaoxiaohui/Work/godzilla/src/components/Menu/subMenu.tsx"],"names":["SubMenu","className","context","useContext","openedSubMenus","isOpend","index","useState","classes","classNames","handleClick","e","setOpen","handleMouse","clearTimeout","timer","setTimeout","clickEvents","onClick","hoverEvents","onMouseEnter","onMouseLeave","renderChildren","subMenuClasses","menuOpen","childrenComponent","childElement","i","console"],"mappings":"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","sourcesContent":["import React,{ useContext, useState, FunctionComponentElement } from 'react'\nimport classNames from 'classnames'\nimport { MenuContext } from './menu'\nimport { MenuItemProps } from './menuItem'\nimport Icon from '../Icon/icon'\nimport Transition from '../Transition/transition'\nexport interface SubMenuProps {\n  index?: string;\n  title: string;\n  className?: string;\n}\n\nconst SubMenu: React.FC<SubMenuProps> = ({ index, title, children, className}) => {\n  const context = useContext(MenuContext)\n  const openedSubMenus = context.defaultOpenSubMenus as Array<string>\n  const isOpend = (index && context.mode === 'vertical') ? openedSubMenus.includes(index) : false\n  const [ menuOpen, setOpen ] = useState(isOpend)\n  const classes = classNames('menu-item submenu-item', className, {\n    'is-active': context.index === index,\n    'is-opened': menuOpen,\n    'is-vertical': context.mode === 'vertical'\n  })\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault()\n    setOpen(!menuOpen)\n  }\n  let timer: any\n  const handleMouse = (e: React.MouseEvent, toggle: boolean) => {\n    clearTimeout(timer)\n    e.preventDefault()\n    timer = setTimeout(() => {\n      setOpen(toggle)\n    }, 300)\n  }\n  const clickEvents = context.mode === 'vertical' ? {\n    onClick: handleClick\n  } : {}\n  const hoverEvents = context.mode !== 'vertical' ? {\n    onMouseEnter: (e: React.MouseEvent) => { handleMouse(e, true)},\n    onMouseLeave: (e: React.MouseEvent) => { handleMouse(e, false)}\n  } : {}\n  const renderChildren = () => {\n    const subMenuClasses = classNames('viking-submenu', {\n      'menu-opened': menuOpen\n    })\n    const childrenComponent = React.Children.map(children, (child, i) => {\n      const childElement = child as FunctionComponentElement<MenuItemProps>\n      if (childElement.type.displayName === 'MenuItem') {\n        return React.cloneElement(childElement, {\n          index: `${index}-${i}`\n        })\n      } else {\n        console.error(\"Warning: SubMenu has a child which is not a MenuItem component\")\n      }\n    })\n    return (\n      <Transition\n        in={menuOpen}\n        timeout={300}\n        animation=\"zoom-in-top\"\n      >\n        <ul className={subMenuClasses}>\n          {childrenComponent}\n        </ul>\n      </Transition>\n    )\n  }\n  return (\n    <li key={index} className={classes} {...hoverEvents}>\n      <div className=\"submenu-title\" {...clickEvents}>\n        {title}\n        <Icon icon=\"angle-down\" className=\"arrow-icon\"/>\n      </div>\n      {renderChildren()}\n    </li>\n  )\n}\n\nSubMenu.displayName = 'SubMenu'\nexport default SubMenu"]},"metadata":{},"sourceType":"module"}